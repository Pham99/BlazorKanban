@page "/register"
@using BlazorAppEmpty.Services
@using BlazorAppEmpty.Models
@inject UserService US

<div class="register-form">
	<h3 class="register-header">Register</h3>
	<EditForm Model=@user OnValidSubmit="AddUser" FormName="RegisterForm">
		<InputText @bind-Value="user.Name" placeholder="Name" />
		<br />
		<InputText @bind-Value="user.Email" placeholder="E-mail" />
		<br />
		<InputText @bind-Value="user.Password" placeholder="Password" />
		<br />
		<input class="register-btn" type="submit" @onclick="AddUser">Register</input>
	</EditForm>
</div>

@code {
	[SupplyParameterFromForm]
	public User? user { get; set; }

	//zajištění, že user je inicializován před použitím
	protected override void OnInitialized()
	{
		user ??= new();
	}

	public async Task AddUser()
	{
		await US.AddNewUser(user);
		user = new User();
	}
}
